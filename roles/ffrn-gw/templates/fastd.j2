# {{ ansible_managed }}

# Log warnings and errors to stderr
log level warn;

# Log everything to a log file
#log to "/var/log/fastd-mesh-vpn.log" level debug;

# Set the interface name
interface "ffrn-vpn";
mode tap;

# Support xsalsa20 and aes128 encryption methods, prefer xsalsa20
method "null";
method "xsalsa20-poly1305";

# Bind to a fixed port, IPv4 & IPv6
bind any:10000;

peer limit {{ fastd_peer_limit }};

# Secret key generated by `fastd --generate-key`
secret "{{ fastd_priv_key }}";

# Set the interface MTU for TAP mode with xsalsa20/aes128 over IPv4 with a base MTU of 1492 (PPPoE)
# (see MTU selection documentation)
mtu 1312;

# Include peers from the directory 'peers'
include peers from "peers";

status socket "/var/run/fastd.sock";

on up "/etc/fastd/ffrn-mesh-vpn/up.sh";

